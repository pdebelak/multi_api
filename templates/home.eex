<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>MultiAPI</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: Helvetica,Arial,sans-serif;
        font-size: 14px;
        line-height: 1.4;
        color: #333;
        background-color: #3367d6;
      }
      .wrapper {
        max-width: 960px;
        margin: 0 auto;
        background-color: #fff;
        border: 1px solid #eee;
        border-radius: 5px;
        padding: 20px 30px;
        margin-top: 20px;
      }
      h1 {
        font-weight: 500;
      }
      .title {
        font-size: 3em;
      }
      .lead {
        font-weight: 300;
        margin-bottom: 20px;
        font-size: 1.6em;
      }
      .row {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
      }
      .row > div {
        width: 50%;
        padding-right: 15px;
      }
      pre {
        font-family: monospace;
        font-size: 1em;
        display: block;
        padding: 9.5px;
        margin: 0 0 10px;
        font-size: 13px;
        line-height: 1.42857143;
        color: #333;
        word-break: break-all;
        word-wrap: break-word;
        background-color: #f5f5f5;
        border: 1px solid #ccc;
        border-radius: 4px;
        overflow: auto;
      }
      label {
        display: inline-block;
        font-weight: 700;
      }
      input {
        display: block;
        width: 100%;
        height: 34px;
        padding: 6px 12px;
        font-size: 14px;
        line-height: 1.4;
        color: #555;
        background-color: #fff;
        background-image: none;
        border: 1px solid #ccc;
        border-radius: 4px;
        margin-top: 5px;
      }
      button, .btn {
        text-decoration: none;
        display: inline-block;
        padding: 6px 12px;
        margin-bottom: 0;
        margin-top: 10px;
        font-size: 14px;
        font-weight: 400;
        line-height: 1.4;
        text-align: center;
        white-space: nowrap;
        vertical-align: middle;
        -ms-touch-action: manipulation;
        touch-action: manipulation;
        cursor: pointer;
        background-image: none;
        border: 1px solid #aaa;
        border-radius: 4px;
      }
      button {
        color: #fff;
        background-color: #5cb85c;
      }
      button:hover {
        background-color: #449d44;
      }
      .btn {
        color: #333;
        background-color: #fff;
      }
      .btn:hover {
        background-color: #e6e6e6
      }
    </style>
  </head>
  <body>
    <section class="wrapper">
      <h1 class="title">Welcome to MultiAPI!</h1>
      <p class="lead">Get information from multiple urls in the time it takes for the slowest to respond.</p>
      <pre>$ curl --data '["http://jsonplaceholder.typicode.com/posts/1", "http://jsonplaceholder.typicode.com/posts/2"]' <%= url %>
[
  {
    "url": "http://jsonplaceholder.typicode.com/posts/1",
    "response": {
      "userId":1,
      "title":"sunt aut facere repellat provident occaecati excepturi optio reprehenderit",
      "id":1,
      "body":"quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto"
    }
  },
  {
    "url": "http://jsonplaceholder.typicode.com/posts/2",
    "response": {
      "userId":1,
      "title":"qui est esse",
      "id":2,
      "body":"est rerum tempore vitae\nsequi sint nihil reprehenderit dolor beatae ea dolores neque\nfugiat blanditiis voluptate porro vel nihil molestiae ut reiciendis\nqui aperiam non debitis possimus qui neque nisi nulla"
    }
  }
]
      </pre>
    </section>
    <section class="wrapper">
      <h1>Try it out!</h1>
      <div class="row">
        <div>
          <form method="post" action="/">
            <label for="urls[]">Urls</label>
            <div id="url-inputs">
              <input type="text" name="urls[]" class="url">
            </div>
            <button>Try it!</button>
            <a href="#" id="add-url" class="btn">Add another url</a>
          </form>
        </div>
        <div id="result">
        </div>
      </div>
    </section>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>
      $('#add-url').on('click', function(e) {
        e.preventDefault();
        $('#url-inputs').append('<input type="text" name="urls[]" class="url">');
      });
      $('form').on('submit', function(e) {
        e.preventDefault();
        var urls = [];
        $('.url').each(function(_, el) { urls.push(el.value); });
        $.post("/", JSON.stringify(urls), function(response) {
          $('#result').html('<pre>' + JSON.stringify(response, null, 2) + '</pre>');
        });
      });
    </script>
  </body>
</html>
